package enlace_datos.entidades.gestiones.cheques;

import enlace_datos.util.myEntityImpl;
import enlace_datos.util.utils;
import enlace_datos.util.utils_DB;

import oracle.jbo.JboException;
import oracle.jbo.Key;
import oracle.jbo.NameValuePairs;
import oracle.jbo.domain.Date;
import oracle.jbo.domain.Number;
import oracle.jbo.server.AttributeDefImpl;
import oracle.jbo.server.EntityDefImpl;
import oracle.jbo.server.EntityImpl;
import oracle.jbo.server.SequenceImpl;
import oracle.jbo.server.TransactionEvent;
import oracle.jbo.server.ViewRowImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisDocPagoAnuladoImpl extends myEntityImpl {
    public static final int IDDOCPAGOANULADO = 0;
    public static final int IDMOTIVOANULACION = 1;
    public static final int IDDOCPAGO = 2;
    public static final int NODOCFISICO = 3;
    public static final int IDDOCPAGOREPOSICION = 4;
    public static final int IDACTAFACSIMIL = 5;
    public static final int SOLICITADOPOR = 6;
    public static final int CREADOPOR = 7;
    public static final int FECHACREACION = 8;
    public static final int IDESTADO = 9;
    public static final int REPOSICION = 10;
    public static final int CONRECALCULO = 11;
    public static final int IDFORM22 = 12;
    public static final int APROBAR = 13;
    public static final int IDPROCESO = 14;
    public static final int MODIFICADOPOR = 15;
    public static final int FECHAMODIFICACION = 16;
    public static final int ANIO = 17;
    public static final int IDDOCPAGORECIBIDO = 18;
    public static final int RECIBIDO = 19;
    public static final int OBSERVACION = 20;
    public static final int PERFILES = 21;
    public static final int SISACTAFACSIMIL = 22;
    public static final int SISACTAFACSIMIL1 = 23;
    public static final int SISDOCPAGORECIBIDO = 24;
    private static EntityDefImpl mDefinitionObject;

    /**This is the default constructor (do not remove)
     */
    public SisDocPagoAnuladoImpl() {
    }


    /**Retrieves the definition object for this instance class.
     */
    public static synchronized EntityDefImpl getDefinitionObject() {
        if (mDefinitionObject == null) {
            mDefinitionObject = (EntityDefImpl)EntityDefImpl.findDefObject("enlace_datos.entidades.gestiones.cheques.SisDocPagoAnulado");
        }
        return mDefinitionObject;
    }

    /**Add locking logic here.
     */
    public void lock() {
        super.lock();
    }


    private void validarEntidad(){
        
        if (this.getIdMotivoAnulacion()==null){
            throw new JboException("Por favor seleccione el motivo de la anulación.");
        }
        
        if (this.getIdDocPago()==null){
            throw new JboException("Por favor ingrese el num pago a anular.");
        }
        
        if ( this.getSolicitadoPor()==null){
        
           if (this.getCreadoPor()!=null && !this.getCreadoPor().equals("CAJA")){
            
               throw new JboException("Por favor ingrese solicitado por.");   
           }
            
            
        }

        /*if (this.getReposicion()==null ||(this.getReposicion()!=null &&this.getReposicion().equals("")))
        {
            throw new JboException("Por favor seleccione si es con reposión");
        }*/
        
    }
    /**Custom DML update/insert/delete logic here.
     */
    protected void doDML(int operation, TransactionEvent e) {
    
        validarEntidad();
        if (operation==this.DML_INSERT){  
                SequenceImpl sequence = new SequenceImpl("SIS_DOC_PAGO_ANULADO_SQ",e.getDBTransaction());
                this.setIdDocPagoAnulado(sequence.getSequenceNumber());
                this.setIdEstado(utils_DB.getIdEstado(e.getDBTransaction(),"NO PROCESADO","SIS_DOC_PAGO_ANULADO"));    
                
                if(this.getCreadoPor() == null)
                {
                    this.setCreadoPor(utils.getAuthUser(this.getDBTransaction()));
                }
                
                  if (this.getReposicion()==null){
                      this.setReposicion("NO");
                  }
            /*
                if (this.getReposicion()==null ||this.getReposicion().equals("NO")){
                    this.setIdEstado(utils_DB.getIdEstado(e.getDBTransaction(),"PROCESADO_SIN_PAGO","SIS_DOC_PAGO_ANULADO"));
                }else if(this.getReposicion().equals("SI")){
                    this.setIdEstado(utils_DB.getIdEstado(e.getDBTransaction(),"NO PROCESADO","SIS_DOC_PAGO_ANULADO"));    
                }
            */            
                
              }//coloca # correspondiente al id_doc_pago_anulado a traves de una secuencia creada.

        if (operation==this.DML_UPDATE){
            Object vIdEstado;
        
       // if (this.getRecibido() ){
         //   System.out.println(" seleccione un recibido "+ this.getNoDocFisico());
         //   String consulta = "select nvl(id_docpago_recibido,0) as id_docpago_recibido from  sis_docPago_recibido where trunc(sysdate)= trunc(fecha_creacion)";
           // Object varDocRecibido = utils_DB.getEjecutarQuerry(this.getDBTransaction(),consulta);
           /* 
            if (varDocRecibido  != null && utils.getNumberOracle(varDocRecibido).compareTo(0) == 1) {
                
                this.setIdDocpagoRecibido(utils.getNumberOracle(varDocRecibido)); 
               
                
            }
            else {
                NameValuePairs parametro;
                parametro = new NameValuePairs();
                parametro.setAttribute("1",utils.getAuthUser(e.getDBTransaction() ));
                utils_DB.ejecutarProcedimiento(this.getDBTransaction(),"SIS_PKG_PROCS.crearCheqRecibido(?)",parametro);
                varDocRecibido = utils_DB.getEjecutarQuerry(this.getDBTransaction(),consulta);
                 
                this.setIdDocpagoRecibido(utils.getNumberOracle(varDocRecibido)); 
            }
            System.out.println(" id pago recibido "+ this.getSisDocpagoRecibido().getIdDocpagoRecibido());
            this.setIdDocpagoRecibido(this.getSisDocpagoRecibido().getIdDocpagoRecibido()); 
            System.out.println(" id pago recibido "+ this.getSisDocpagoRecibido().getIdDocpagoRecibido());
            
        }*/
        
        //ViewRowImpl instancia = (ViewRowImpl)this.getDBTransaction().getRootApplicationModule().findViewObject("consul_cheqAnuladoXRecibir_vw").getCurrentRow();
        
            ViewRowImpl instancia = (ViewRowImpl)this.getDBTransaction().getRootApplicationModule().findViewObject("consul_cheqAnuladoXRecibir_vw1").getCurrentRow();
        if (instancia != null) {
                if(this.getRecibido().booleanValue()== false ){
                    if(this.getIdDocpagoRecibido() != null){
                        this.setIdDocpagoRecibido(null);
                    }
                }
        }
        
         if(this.getAprobar()!=null){
            
            this.setModificadoPor(utils.getAuthUser(this.getDBTransaction()));
            this.setFechaModificacion(utils.getFechaActual());
                        
            if (this.getAprobar()){
                
                //vIdEstado=utils_DB.getEjecutarQuerry(this.getDBTransaction(),"select id_estado from sis_estado_docpago_anulado_vw where nombre='VERIFICADO'");
                //this.setIdEstado(utils.getNumberOracle(vIdEstado));
                this.setIdEstado(utils_DB.getIdEstado(e.getDBTransaction(),"VERIFICADO","SIS_DOC_PAGO_ANULADO"));        
                                
            }else{
                //vIdEstado=utils_DB.getEjecutarQuerry(this.getDBTransaction(),"select id_estado from sis_estado_docpago_anulado_vw where nombre='NO PROCESADO'");
                //this.setIdEstado(utils.getNumberOracle(vIdEstado));
                 this.setIdEstado(utils_DB.getIdEstado(e.getDBTransaction(),"NO PROCESADO","SIS_DOC_PAGO_ANULADO"));        
                
            }
            
         }
            //System.out.println("actualizando la entidad  " + this.getNoDocFisico());
        }

       //System.out.println("actualizando la entidad  " + this.getNoDocFisico());
        registrarLogOperaciones(operation,e);
        super.doDML(operation, e);
    }

    /**Gets the attribute value for IdDocPagoAnulado, using the alias name IdDocPagoAnulado
     */
    public Number getIdDocPagoAnulado() {
        return (Number)getAttributeInternal(IDDOCPAGOANULADO);
    }

    /**Sets <code>value</code> as the attribute value for IdDocPagoAnulado
     */
    public void setIdDocPagoAnulado(Number value) {
        setAttributeInternal(IDDOCPAGOANULADO, value);
    }

    /**Gets the attribute value for IdMotivoAnulacion, using the alias name IdMotivoAnulacion
     */
    public Number getIdMotivoAnulacion() {
        return (Number)getAttributeInternal(IDMOTIVOANULACION);
    }

    /**Sets <code>value</code> as the attribute value for IdMotivoAnulacion
     */
    public void setIdMotivoAnulacion(Number value) {
        setAttributeInternal(IDMOTIVOANULACION, value);
    }

    /**Gets the attribute value for IdDocPago, using the alias name IdDocPago
     */
    public Number getIdDocPago() {
        return (Number)getAttributeInternal(IDDOCPAGO);
    }

    /**Sets <code>value</code> as the attribute value for IdDocPago
     */
    public void setIdDocPago(Number value) {
        setAttributeInternal(IDDOCPAGO, value);
    }

    /**Gets the attribute value for NoDocFisico, using the alias name NoDocFisico
     */
    public String getNoDocFisico() {
        return (String)getAttributeInternal(NODOCFISICO);
    }

    /**Sets <code>value</code> as the attribute value for NoDocFisico
     */
    public void setNoDocFisico(String value) {
        setAttributeInternal(NODOCFISICO, value);
    }

    /**Gets the attribute value for IdDocPagoReposicion, using the alias name IdDocPagoReposicion
     */
    public Number getIdDocPagoReposicion() {
        return (Number)getAttributeInternal(IDDOCPAGOREPOSICION);
    }

    /**Sets <code>value</code> as the attribute value for IdDocPagoReposicion
     */
    public void setIdDocPagoReposicion(Number value) {
        setAttributeInternal(IDDOCPAGOREPOSICION, value);
    }

    /**Gets the attribute value for IdActaFacsimil, using the alias name IdActaFacsimil
     */
    public Number getIdActaFacsimil() {
        return (Number)getAttributeInternal(IDACTAFACSIMIL);
    }

    /**Sets <code>value</code> as the attribute value for IdActaFacsimil
     */
    public void setIdActaFacsimil(Number value) {
        setAttributeInternal(IDACTAFACSIMIL, value);
    }

    /**Gets the attribute value for SolicitadoPor, using the alias name SolicitadoPor
     */
    public String getSolicitadoPor() {
        return (String)getAttributeInternal(SOLICITADOPOR);
    }

    /**Sets <code>value</code> as the attribute value for SolicitadoPor
     */
    public void setSolicitadoPor(String value) {
        setAttributeInternal(SOLICITADOPOR, value);
    }

    /**Gets the attribute value for CreadoPor, using the alias name CreadoPor
     */
    public String getCreadoPor() {
        return (String)getAttributeInternal(CREADOPOR);
    }

    /**Sets <code>value</code> as the attribute value for CreadoPor
     */
    public void setCreadoPor(String value) {
        setAttributeInternal(CREADOPOR, value);
    }

    /**Gets the attribute value for FechaCreacion, using the alias name FechaCreacion
     */
    public Date getFechaCreacion() {
        return (Date)getAttributeInternal(FECHACREACION);
    }

    /**Sets <code>value</code> as the attribute value for FechaCreacion
     */
    public void setFechaCreacion(Date value) {
        setAttributeInternal(FECHACREACION, value);
    }

    /**getAttrInvokeAccessor: generated method. Do not modify.
     */
    protected Object getAttrInvokeAccessor(int index, 
                                           AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDDOCPAGOANULADO:
            return getIdDocPagoAnulado();
        case IDMOTIVOANULACION:
            return getIdMotivoAnulacion();
        case IDDOCPAGO:
            return getIdDocPago();
        case NODOCFISICO:
            return getNoDocFisico();
        case IDDOCPAGOREPOSICION:
            return getIdDocPagoReposicion();
        case IDACTAFACSIMIL:
            return getIdActaFacsimil();
        case SOLICITADOPOR:
            return getSolicitadoPor();
        case CREADOPOR:
            return getCreadoPor();
        case FECHACREACION:
            return getFechaCreacion();
        case IDESTADO:
            return getIdEstado();
        case REPOSICION:
            return getReposicion();
        case CONRECALCULO:
            return getConRecalculo();
        case IDFORM22:
            return getIdForm22();
        case APROBAR:
            return getAprobar();
        case IDPROCESO:
            return getIdProceso();
        case MODIFICADOPOR:
            return getModificadoPor();
        case FECHAMODIFICACION:
            return getFechaModificacion();
        case ANIO:
            return getAnio();
        case IDDOCPAGORECIBIDO:
            return getIdDocpagoRecibido();
        case RECIBIDO:
            return getRecibido();
        case OBSERVACION:
            return getObservacion();
        case PERFILES:
            return getPerfiles();
        case SISACTAFACSIMIL1:
            return getSisActaFacsimil1();
        case SISDOCPAGORECIBIDO:
            return getSisDocpagoRecibido();
        case SISACTAFACSIMIL:
            return getSisActaFacsimil();
        default:
            return super.getAttrInvokeAccessor(index, attrDef);
        }
    }

    /**setAttrInvokeAccessor: generated method. Do not modify.
     */
    protected void setAttrInvokeAccessor(int index, Object value, 
                                         AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDDOCPAGOANULADO:
            setIdDocPagoAnulado((Number)value);
            return;
        case IDMOTIVOANULACION:
            setIdMotivoAnulacion((Number)value);
            return;
        case IDDOCPAGO:
            setIdDocPago((Number)value);
            return;
        case NODOCFISICO:
            setNoDocFisico((String)value);
            return;
        case IDDOCPAGOREPOSICION:
            setIdDocPagoReposicion((Number)value);
            return;
        case IDACTAFACSIMIL:
            setIdActaFacsimil((Number)value);
            return;
        case SOLICITADOPOR:
            setSolicitadoPor((String)value);
            return;
        case CREADOPOR:
            setCreadoPor((String)value);
            return;
        case FECHACREACION:
            setFechaCreacion((Date)value);
            return;
        case IDESTADO:
            setIdEstado((Number)value);
            return;
        case REPOSICION:
            setReposicion((String)value);
            return;
        case CONRECALCULO:
            setConRecalculo((String)value);
            return;
        case IDFORM22:
            setIdForm22((Number)value);
            return;
        case APROBAR:
            setAprobar((Boolean)value);
            return;
        case IDPROCESO:
            setIdProceso((Number)value);
            return;
        case MODIFICADOPOR:
            setModificadoPor((String)value);
            return;
        case FECHAMODIFICACION:
            setFechaModificacion((Date)value);
            return;
        case ANIO:
            setAnio((Number)value);
            return;
        case IDDOCPAGORECIBIDO:
            setIdDocpagoRecibido((Number)value);
            return;
        case RECIBIDO:
            setRecibido((Boolean)value);
            return;
        case OBSERVACION:
            setObservacion((String)value);
            return;
        case PERFILES:
            setPerfiles((String)value);
            return;
        default:
            super.setAttrInvokeAccessor(index, value, attrDef);
            return;
        }
    }

    /**Gets the attribute value for IdEstado, using the alias name IdEstado
     */
    public Number getIdEstado() {
        return (Number)getAttributeInternal(IDESTADO);
    }

    /**Sets <code>value</code> as the attribute value for IdEstado
     */
    public void setIdEstado(Number value) {
        setAttributeInternal(IDESTADO, value);
    }

    /**Gets the attribute value for Reposicion, using the alias name Reposicion
     */
    public String getReposicion() {
        return (String)getAttributeInternal(REPOSICION);
    }

    /**Sets <code>value</code> as the attribute value for Reposicion
     */
    public void setReposicion(String value) {
        setAttributeInternal(REPOSICION, value);
    }

    /**Validation method for SolicitadoPor
     */
    public boolean validateSolicitadoPor(String  data) {
    
    
     if (data==null){
       if (this.getCreadoPor()!=null && !this.getCreadoPor().equals("CAJA"))
          return false;
         
     }return true;
     /*
       if (utils.isNumber(data)==false){
           
       }
       return true;
       */
    }

    /**Gets the attribute value for ConRecalculo, using the alias name ConRecalculo
     */
    public String getConRecalculo() {
        return (String)getAttributeInternal(CONRECALCULO);
    }

    /**Sets <code>value</code> as the attribute value for ConRecalculo
     */
    public void setConRecalculo(String value) {
        setAttributeInternal(CONRECALCULO, value);
    }

    /**Gets the attribute value for IdForm22, using the alias name IdForm22
     */
    public Number getIdForm22() {
        return (Number)getAttributeInternal(IDFORM22);
    }

    /**Sets <code>value</code> as the attribute value for IdForm22
     */
    public void setIdForm22(Number value) {
        setAttributeInternal(IDFORM22, value);
    }

    /**Gets the attribute value for Aprobar, using the alias name Aprobar
     */
    public Boolean getAprobar() {
        return (Boolean)getAttributeInternal(APROBAR);
        
    }

    /**Sets <code>value</code> as the attribute value for Aprobar
     */
    public void setAprobar(Boolean value) {
        setAttributeInternal(APROBAR, value);
    }

    /**Gets the attribute value for IdProceso, using the alias name IdProceso
     */
    public Number getIdProceso() {
        return (Number)getAttributeInternal(IDPROCESO);
    }

    /**Sets <code>value</code> as the attribute value for IdProceso
     */
    public void setIdProceso(Number value) {
        setAttributeInternal(IDPROCESO, value);
    }

    /**Gets the attribute value for ModificadoPor, using the alias name ModificadoPor
     */
    public String getModificadoPor() {
        return (String)getAttributeInternal(MODIFICADOPOR);
    }

    /**Sets <code>value</code> as the attribute value for ModificadoPor
     */
    public void setModificadoPor(String value) {
        setAttributeInternal(MODIFICADOPOR, value);
    }

    /**Gets the attribute value for FechaModificacion, using the alias name FechaModificacion
     */
    public Date getFechaModificacion() {
        return (Date)getAttributeInternal(FECHAMODIFICACION);
    }

    /**Sets <code>value</code> as the attribute value for FechaModificacion
     */
    public void setFechaModificacion(Date value) {
        setAttributeInternal(FECHAMODIFICACION, value);
    }

    /**Gets the associated entity SisActaFacsimilImpl
     */
    public SisActaFacsimilImpl getSisActaFacsimil() {
        return (SisActaFacsimilImpl)getAttributeInternal(SISACTAFACSIMIL);
    }

    /**Sets <code>value</code> as the associated entity SisActaFacsimilImpl
     */
    public void setSisActaFacsimil(SisActaFacsimilImpl value) {
        setAttributeInternal(SISACTAFACSIMIL, value);
    }

    /**Gets the attribute value for Anio, using the alias name Anio
     */
    public Number getAnio() {
        return (Number)getAttributeInternal(ANIO);
    }

    /**Sets <code>value</code> as the attribute value for Anio
     */
    public void setAnio(Number value) {
        setAttributeInternal(ANIO, value);
    }

    /**Gets the associated entity SisActaFacsimilImpl
     */
    public SisActaFacsimilImpl getSisActaFacsimil1() {
        return (SisActaFacsimilImpl)getAttributeInternal(SISACTAFACSIMIL1);
    }

    /**Sets <code>value</code> as the associated entity SisActaFacsimilImpl
     */
    public void setSisActaFacsimil1(SisActaFacsimilImpl value) {
        setAttributeInternal(SISACTAFACSIMIL1, value);
    }

    /**Gets the attribute value for IdDocpagoRecibido, using the alias name IdDocpagoRecibido
     */
    public Number getIdDocpagoRecibido() {
        return (Number)getAttributeInternal(IDDOCPAGORECIBIDO);
    }

    /**Sets <code>value</code> as the attribute value for IdDocpagoRecibido
     */
    public void setIdDocpagoRecibido(Number value) {
        setAttributeInternal(IDDOCPAGORECIBIDO, value);
    }

    /**Gets the attribute value for Recibido, using the alias name Recibido
     */
    public Boolean getRecibido() {
        return (Boolean)getAttributeInternal(RECIBIDO);
    }

    /**Sets <code>value</code> as the attribute value for Recibido
     */
    public void setRecibido(Boolean value) {
        setAttributeInternal(RECIBIDO, value);
    }

    /**Gets the attribute value for Observacion, using the alias name Observacion
     */
    public String getObservacion() {
        return (String)getAttributeInternal(OBSERVACION);
    }

    /**Sets <code>value</code> as the attribute value for Observacion
     */
    public void setObservacion(String value) {
        setAttributeInternal(OBSERVACION, value);
    }
    /**Gets the associated entity SisDocpagoRecibidoImpl
     */
    public SisDocpagoRecibidoImpl getSisDocpagoRecibido() {
        return (SisDocpagoRecibidoImpl)getAttributeInternal(SISDOCPAGORECIBIDO);
    }

    /**Sets <code>value</code> as the associated entity SisDocpagoRecibidoImpl
     */
    public void setSisDocpagoRecibido(SisDocpagoRecibidoImpl value) {
        setAttributeInternal(SISDOCPAGORECIBIDO, value);
    }


    /**Gets the attribute value for Perfiles, using the alias name Perfiles
     */
    public String getPerfiles() {
        return (String)getAttributeInternal(PERFILES);
    }

    /**Sets <code>value</code> as the attribute value for Perfiles
     */
    public void setPerfiles(String value) {
        setAttributeInternal(PERFILES, value);
    }

    /**Creates a Key object based on given key constituents
     */
    public static Key createPrimaryKey(Number idDocPagoAnulado) {
        return new Key(new Object[]{idDocPagoAnulado});
    }
}
