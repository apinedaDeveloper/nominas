package enlace_datos.entidades.complementos;

import enlace_datos.consultas.complementos.SisComplementoDetVwRowImpl;

import enlace_datos.util.myEntityImpl;
import enlace_datos.util.utils;

import java.util.Calendar;

import oracle.jbo.Key;
import oracle.jbo.RowIterator;
import oracle.jbo.ViewObject;
import oracle.jbo.domain.Date;
import oracle.jbo.domain.Number;
import oracle.jbo.server.AttributeDefImpl;
import oracle.jbo.server.EntityDefImpl;
import oracle.jbo.server.EntityImpl;
import oracle.jbo.server.SessionImpl;
import oracle.jbo.server.TransactionEvent;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisComplementoIgssImpl extends myEntityImpl {
    public static final int IDCOMPLEMENTOIGSS = 0;
    public static final int IDSUSPENCIONIGSS = 1;
    public static final int IDPROCESO = 2;
    public static final int DIANOPAGAIGSS = 3;
    public static final int COMPLEMENTOSUELDO = 4;
    public static final int DIFCALCULOIGSS = 5;
    public static final int NOMINAL = 6;
    public static final int DIAINICIO = 7;
    public static final int DIAFIN = 8;
    public static final int IDCONTRATO = 9;
    public static final int IDCOMPLEMENTO = 10;
    public static final int FECHACREACION = 11;
    public static final int CREADOPOR = 12;
    public static final int FECHAMOD = 13;
    public static final int MODPOR = 14;
    public static final int REPROCESARCALCULOS = 15;
    public static final int ISSEL = 16;
    public static final int PERIODO = 17;
    public static final int ANIO = 18;
    public static final int SISCOMPLEMENTO = 19;
    private static EntityDefImpl mDefinitionObject;

    /**This is the default constructor (do not remove)
     */
    public SisComplementoIgssImpl() {
    }


    /**Retrieves the definition object for this instance class.
     */
    public static synchronized EntityDefImpl getDefinitionObject() {
        if (mDefinitionObject == null) {
            mDefinitionObject = (EntityDefImpl)EntityDefImpl.findDefObject("enlace_datos.entidades.complementos.SisComplementoIgss");
        }
        return mDefinitionObject;
    }

    /**Gets the attribute value for IdComplementoIgss, using the alias name IdComplementoIgss
     */
    public Number getIdComplementoIgss() {
        return (Number)getAttributeInternal(IDCOMPLEMENTOIGSS);
    }

    /**Sets <code>value</code> as the attribute value for IdComplementoIgss
     */
    public void setIdComplementoIgss(Number value) {
        setAttributeInternal(IDCOMPLEMENTOIGSS, value);
    }

    /**Gets the attribute value for IdSuspencionIgss, using the alias name IdSuspencionIgss
     */
    public Number getIdSuspencionIgss() {
        return (Number)getAttributeInternal(IDSUSPENCIONIGSS);
    }

    /**Sets <code>value</code> as the attribute value for IdSuspencionIgss
     */
    public void setIdSuspencionIgss(Number value) {
        setAttributeInternal(IDSUSPENCIONIGSS, value);
    }

    /**Gets the attribute value for IdProceso, using the alias name IdProceso
     */
    public Number getIdProceso() {
        return (Number)getAttributeInternal(IDPROCESO);
    }

    /**Sets <code>value</code> as the attribute value for IdProceso
     */
    public void setIdProceso(Number value) {
        setAttributeInternal(IDPROCESO, value);
    }

    /**Gets the attribute value for DiaNoPagaIgss, using the alias name DiaNoPagaIgss
     */
    public Number getDiaNoPagaIgss() {
        return (Number)getAttributeInternal(DIANOPAGAIGSS);
    }

    /**Sets <code>value</code> as the attribute value for DiaNoPagaIgss
     */
    public void setDiaNoPagaIgss(Number value) {
        setAttributeInternal(DIANOPAGAIGSS, value);
    }

    /**Gets the attribute value for ComplementoSueldo, using the alias name ComplementoSueldo
     */
    public Number getComplementoSueldo() {
        return (Number)getAttributeInternal(COMPLEMENTOSUELDO);
    }

    /**Sets <code>value</code> as the attribute value for ComplementoSueldo
     */
    public void setComplementoSueldo(Number value) {
        setAttributeInternal(COMPLEMENTOSUELDO, value);
    }

    /**Gets the attribute value for DifCalculoIgss, using the alias name DifCalculoIgss
     */
    public Number getDifCalculoIgss() {
        return (Number)getAttributeInternal(DIFCALCULOIGSS);
    }

    /**Sets <code>value</code> as the attribute value for DifCalculoIgss
     */
    public void setDifCalculoIgss(Number value) {
        setAttributeInternal(DIFCALCULOIGSS, value);
    }

    /**Gets the attribute value for Nominal, using the alias name Nominal
     */
    public Number getNominal() {
        return (Number)getAttributeInternal(NOMINAL);
    }

    /**Sets <code>value</code> as the attribute value for Nominal
     */
    public void setNominal(Number value) {
        setAttributeInternal(NOMINAL, value);
    }

    /**Gets the attribute value for DiaInicio, using the alias name DiaInicio
     */
    public Number getDiaInicio() {
        return (Number)getAttributeInternal(DIAINICIO);
    }

    /**Sets <code>value</code> as the attribute value for DiaInicio
     */
    public void setDiaInicio(Number value) {
        setAttributeInternal(DIAINICIO, value);
    }

    /**Gets the attribute value for DiaFin, using the alias name DiaFin
     */
    public Number getDiaFin() {
        return (Number)getAttributeInternal(DIAFIN);
    }

    /**Sets <code>value</code> as the attribute value for DiaFin
     */
    public void setDiaFin(Number value) {
        setAttributeInternal(DIAFIN, value);
    }

    /**Gets the attribute value for IdContrato, using the alias name IdContrato
     */
    public Number getIdContrato() {
        return (Number)getAttributeInternal(IDCONTRATO);
    }

    /**Sets <code>value</code> as the attribute value for IdContrato
     */
    public void setIdContrato(Number value) {
        setAttributeInternal(IDCONTRATO, value);
    }

    /**Gets the attribute value for IdComplemento, using the alias name IdComplemento
     */
    public Number getIdComplemento() {
        return (Number)getAttributeInternal(IDCOMPLEMENTO);
    }

    /**Sets <code>value</code> as the attribute value for IdComplemento
     */
    public void setIdComplemento(Number value) {
        setAttributeInternal(IDCOMPLEMENTO, value);
    }

    /**Gets the attribute value for FechaCreacion, using the alias name FechaCreacion
     */
    public Date getFechaCreacion() {
        return (Date)getAttributeInternal(FECHACREACION);
    }

    /**Sets <code>value</code> as the attribute value for FechaCreacion
     */
    public void setFechaCreacion(Date value) {
        setAttributeInternal(FECHACREACION, value);
    }

    /**Gets the attribute value for CreadoPor, using the alias name CreadoPor
     */
    public String getCreadoPor() {
        return (String)getAttributeInternal(CREADOPOR);
    }

    /**Sets <code>value</code> as the attribute value for CreadoPor
     */
    public void setCreadoPor(String value) {
        setAttributeInternal(CREADOPOR, value);
    }

    /**Gets the attribute value for FechaMod, using the alias name FechaMod
     */
    public Date getFechaMod() {
        return (Date)getAttributeInternal(FECHAMOD);
    }

    /**Sets <code>value</code> as the attribute value for FechaMod
     */
    public void setFechaMod(Date value) {
        setAttributeInternal(FECHAMOD, value);
    }

    /**Gets the attribute value for ModPor, using the alias name ModPor
     */
    public String getModPor() {
        return (String)getAttributeInternal(MODPOR);
    }

    /**Sets <code>value</code> as the attribute value for ModPor
     */
    public void setModPor(String value) {
        setAttributeInternal(MODPOR, value);
    }

    /**getAttrInvokeAccessor: generated method. Do not modify.
     */
    protected Object getAttrInvokeAccessor(int index, 
                                           AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDCOMPLEMENTOIGSS:
            return getIdComplementoIgss();
        case IDSUSPENCIONIGSS:
            return getIdSuspencionIgss();
        case IDPROCESO:
            return getIdProceso();
        case DIANOPAGAIGSS:
            return getDiaNoPagaIgss();
        case COMPLEMENTOSUELDO:
            return getComplementoSueldo();
        case DIFCALCULOIGSS:
            return getDifCalculoIgss();
        case NOMINAL:
            return getNominal();
        case DIAINICIO:
            return getDiaInicio();
        case DIAFIN:
            return getDiaFin();
        case IDCONTRATO:
            return getIdContrato();
        case IDCOMPLEMENTO:
            return getIdComplemento();
        case FECHACREACION:
            return getFechaCreacion();
        case CREADOPOR:
            return getCreadoPor();
        case FECHAMOD:
            return getFechaMod();
        case MODPOR:
            return getModPor();
        case REPROCESARCALCULOS:
            return getReprocesarCalculos();
        case ISSEL:
            return getisSel();
        case PERIODO:
            return getPeriodo();
        case ANIO:
            return getAnio();
        case SISCOMPLEMENTO:
            return getSisComplemento();
        default:
            return super.getAttrInvokeAccessor(index, attrDef);
        }
    }

    /**setAttrInvokeAccessor: generated method. Do not modify.
     */
    protected void setAttrInvokeAccessor(int index, Object value, 
                                         AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDCOMPLEMENTOIGSS:
            setIdComplementoIgss((Number)value);
            return;
        case IDSUSPENCIONIGSS:
            setIdSuspencionIgss((Number)value);
            return;
        case IDPROCESO:
            setIdProceso((Number)value);
            return;
        case DIANOPAGAIGSS:
            setDiaNoPagaIgss((Number)value);
            return;
        case COMPLEMENTOSUELDO:
            setComplementoSueldo((Number)value);
            return;
        case DIFCALCULOIGSS:
            setDifCalculoIgss((Number)value);
            return;
        case NOMINAL:
            setNominal((Number)value);
            return;
        case DIAINICIO:
            setDiaInicio((Number)value);
            return;
        case DIAFIN:
            setDiaFin((Number)value);
            return;
        case IDCONTRATO:
            setIdContrato((Number)value);
            return;
        case IDCOMPLEMENTO:
            setIdComplemento((Number)value);
            return;
        case FECHACREACION:
            setFechaCreacion((Date)value);
            return;
        case CREADOPOR:
            setCreadoPor((String)value);
            return;
        case FECHAMOD:
            setFechaMod((Date)value);
            return;
        case MODPOR:
            setModPor((String)value);
            return;
        case REPROCESARCALCULOS:
            setReprocesarCalculos((String)value);
            return;
        case ISSEL:
            setisSel((Boolean)value);
            return;
        case PERIODO:
            setPeriodo((Number)value);
            return;
        case ANIO:
            setAnio((Number)value);
            return;
        default:
            super.setAttrInvokeAccessor(index, value, attrDef);
            return;
        }
    }

    /**Gets the associated entity SisComplementoImpl
     */
    public SisComplementoImpl getSisComplemento() {
        return (SisComplementoImpl)getAttributeInternal(SISCOMPLEMENTO);
    }

    /**Sets <code>value</code> as the associated entity SisComplementoImpl
     */
    public void setSisComplemento(SisComplementoImpl value) {
        setAttributeInternal(SISCOMPLEMENTO, value);
    }


    protected void doDML(int i, TransactionEvent transactionEvent) {
        if(i == DML_DELETE){
        
            // al borrar una fila de sis_complemento_igss se debe borrar la fila de sis_complemento_det
            ViewObject comp = this.getDBTransaction().getRootApplicationModule().findViewObject("SisComplementoDetVw");
            //comp.setWhereClause("id_contrato = "+this.getIdContrato().toString()+" and id_complemento = "+this.getIdComplemento().toString()+" and periodo="+this.getPeriodo().toString()+" and correlativo="+this.getAnio().toString());
            comp.setWhereClause("id_contrato = "+this.getIdContrato().toString()+" and id_complemento = "+this.getIdComplemento().toString()+" and periodo="+this.getPeriodo().toString()+" and correlativo="+this.getAnio().toString()+" and id_complemento_igss="+this.getIdComplementoIgss().toString());
            comp.executeQuery();
            if(comp.getRowCount() > 0){
                comp.first();

                SisComplementoDetVwRowImpl vfila;        
                vfila=(SisComplementoDetVwRowImpl)comp.getCurrentRow();
                RowIterator vFilasDet;
                
                
                vFilasDet=vfila.getSisComplementoDetajustesVw();
                
                while (vFilasDet.hasNext()){
                    
                    vFilasDet.next();
                    vFilasDet.removeCurrentRow();            
                }

                
                comp.removeCurrentRow();
            }
            comp.setWhereClause(null);
        }

        else if(i == DML_UPDATE){
          
            String modificado = "NO";
            String val, oldval;
            int count = getEntityDef().getAttributeCount();
            
            for (int a = 0; a < count; a++) {

                if(a != 16){
                    //System.out.println("Comparando columna: "+getEntityDef().getAttributeDef(a).getColumnName());
                    val = "";
                    oldval = "";
                    try{
                        val = getAttribute(a).toString();
                    }
                    catch(Exception e){
                        val = "";
                    }
                    try{
                        oldval = getPostedAttribute(a).toString();
                    }
                    catch(Exception e){
                        oldval = "";
                    }
                            
                    if(val.compareToIgnoreCase(oldval) != 0){
                        modificado = "SI";
                        break;
                    }
                }
                
            }
                           
            if(modificado.compareToIgnoreCase("SI")==0){          
                Object fecha = new oracle.jbo.domain.Date().getCurrentDate();
                Calendar calendario = Calendar.getInstance();
                int hora = calendario.get(Calendar.HOUR_OF_DAY);
                int minutos = calendario.get(Calendar.MINUTE);
                int segundos = calendario.get(Calendar.SECOND);
                oracle.jbo.domain.Date fechaHora = new oracle.jbo.domain.Date(fecha.toString()+" "+String.valueOf(hora)+":"+String.valueOf(minutos)+":"+String.valueOf(segundos));
                
                String usuario = utils.getAuthUser(this.getDBTransaction());
                
                this.setModPor(usuario);
                this.setFechaMod(fechaHora);
                //System.out.println("ModPor:"+this.getModPor());
                //System.out.println("FechaMod:"+this.getFechaMod());
            }
        }

        registrarLogOperaciones(i, transactionEvent); 
        super.doDML(i, transactionEvent);
    }

/*
    public String getRowStatus(){
            String rowStatus = null;
            System.out.println("\n************ getRowStatus method is called");
            try {
                switch (this.getEntity(0).getEntityState()) {
                case Entity.STATUS_INITIALIZED:
                    {
                        rowStatus = "Initialized";
                        break;
                    }
                case Entity.STATUS_MODIFIED:
                    {
                        rowStatus = "Modified";
                        break;
                    }
                case Entity.STATUS_UNMODIFIED:
                    {
                        rowStatus = "Unmodified";
                        break;
                    }
                case Entity.STATUS_NEW:
                    {
                        rowStatus = "New";
                        break;
                    }
                }
            } catch (Exception e) {
                // TODO: Add catch code
                e.printStackTrace();
            }
            System.out.println("\n****** Row Status: "+rowStatus);
            return rowStatus;
        }
*/        

    /**Gets the attribute value for ReprocesarCalculos, using the alias name ReprocesarCalculos
     */
    public String getReprocesarCalculos() {
        return (String)getAttributeInternal(REPROCESARCALCULOS);
    }

    /**Sets <code>value</code> as the attribute value for ReprocesarCalculos
     */
    public void setReprocesarCalculos(String value) {
        setAttributeInternal(REPROCESARCALCULOS, value);
    }

    /**Gets the attribute value for isSel, using the alias name isSel
     */
    public Boolean getisSel() {
        return (Boolean)getAttributeInternal(ISSEL);
    }

    /**Sets <code>value</code> as the attribute value for isSel
     */
    public void setisSel(Boolean value) {
        setAttributeInternal(ISSEL, value);
    }

    /**Gets the attribute value for Periodo, using the alias name Periodo
     */
    public Number getPeriodo() {
        return (Number)getAttributeInternal(PERIODO);
    }

    /**Sets <code>value</code> as the attribute value for Periodo
     */
    public void setPeriodo(Number value) {
        setAttributeInternal(PERIODO, value);
    }

    /**Gets the attribute value for Anio, using the alias name Anio
     */
    public Number getAnio() {
        return (Number)getAttributeInternal(ANIO);
    }

    /**Sets <code>value</code> as the attribute value for Anio
     */
    public void setAnio(Number value) {
        setAttributeInternal(ANIO, value);
    }

    /**Creates a Key object based on given key constituents
     */
    public static Key createPrimaryKey(Number idComplementoIgss) {
        return new Key(new Object[]{idComplementoIgss});
    }
}
