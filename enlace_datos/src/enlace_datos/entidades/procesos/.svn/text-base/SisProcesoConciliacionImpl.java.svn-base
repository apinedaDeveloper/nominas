package enlace_datos.entidades.procesos;

import enlace_datos.util.myEntityImpl;

import enlace_datos.util.utils;
import enlace_datos.util.utils_DB;

import oracle.jbo.JboException;
import oracle.jbo.Key;
import oracle.jbo.domain.Date;
import oracle.jbo.domain.Number;
import oracle.jbo.server.AttributeDefImpl;
import oracle.jbo.server.EntityDefImpl;
import oracle.jbo.server.EntityImpl;
import oracle.jbo.server.SequenceImpl;
import oracle.jbo.server.TransactionEvent;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisProcesoConciliacionImpl extends myEntityImpl {
    public static final int IDPROCESOCONCILIACION = 0;
    public static final int MES = 1;
    public static final int ANIO = 2;
    public static final int FECHAEMISIONI = 3;
    public static final int FECHAEMISIONF = 4;
    public static final int FECHAANULACIONI = 5;
    public static final int FECHAANULACIONF = 6;
    public static final int OBSERVACION = 7;
    public static final int CREADOPOR = 8;
    public static final int FECHACREACION = 9;
    public static final int MODPOR = 10;
    public static final int FECHAMOD = 11;
    public static final int FECHAPROCESO = 12;
    public static final int USUARIOOK = 13;
    public static final int FECHAOK = 14;
    private static EntityDefImpl mDefinitionObject;

    /**This is the default constructor (do not remove)
     */
    public SisProcesoConciliacionImpl() {
    }


    /**Retrieves the definition object for this instance class.
     */
    public static synchronized EntityDefImpl getDefinitionObject() {
        if (mDefinitionObject == null) {
            mDefinitionObject = (EntityDefImpl)EntityDefImpl.findDefObject("enlace_datos.entidades.procesos.SisProcesoConciliacion");
        }
        return mDefinitionObject;
    }

    /**Gets the attribute value for IdProcesoConciliacion, using the alias name IdProcesoConciliacion
     */
    public Number getIdProcesoConciliacion() {
        return (Number)getAttributeInternal(IDPROCESOCONCILIACION);
    }

    /**Sets <code>value</code> as the attribute value for IdProcesoConciliacion
     */
    public void setIdProcesoConciliacion(Number value) {
        setAttributeInternal(IDPROCESOCONCILIACION, value);
    }

    /**Gets the attribute value for Mes, using the alias name Mes
     */
    public Number getMes() {
        return (Number)getAttributeInternal(MES);
    }

    /**Sets <code>value</code> as the attribute value for Mes
     */
    public void setMes(Number value) {
        setAttributeInternal(MES, value);
    }

    /**Gets the attribute value for Anio, using the alias name Anio
     */
    public Number getAnio() {
        return (Number)getAttributeInternal(ANIO);
    }

    /**Sets <code>value</code> as the attribute value for Anio
     */
    public void setAnio(Number value) {
        setAttributeInternal(ANIO, value);
    }

    /**Gets the attribute value for FechaEmisionI, using the alias name FechaEmisionI
     */
    public Date getFechaEmisionI() {
        return (Date)getAttributeInternal(FECHAEMISIONI);
    }

    /**Sets <code>value</code> as the attribute value for FechaEmisionI
     */
    public void setFechaEmisionI(Date value) {
        setAttributeInternal(FECHAEMISIONI, value);
    }

    /**Gets the attribute value for FechaEmisionF, using the alias name FechaEmisionF
     */
    public Date getFechaEmisionF() {
        return (Date)getAttributeInternal(FECHAEMISIONF);
    }

    /**Sets <code>value</code> as the attribute value for FechaEmisionF
     */
    public void setFechaEmisionF(Date value) {
        setAttributeInternal(FECHAEMISIONF, value);
    }

    /**Gets the attribute value for FechaAnulacionI, using the alias name FechaAnulacionI
     */
    public Date getFechaAnulacionI() {
        return (Date)getAttributeInternal(FECHAANULACIONI);
    }

    /**Sets <code>value</code> as the attribute value for FechaAnulacionI
     */
    public void setFechaAnulacionI(Date value) {
        setAttributeInternal(FECHAANULACIONI, value);
    }

    /**Gets the attribute value for FechaAnulacionF, using the alias name FechaAnulacionF
     */
    public Date getFechaAnulacionF() {
        return (Date)getAttributeInternal(FECHAANULACIONF);
    }

    /**Sets <code>value</code> as the attribute value for FechaAnulacionF
     */
    public void setFechaAnulacionF(Date value) {
        setAttributeInternal(FECHAANULACIONF, value);
    }

    /**Gets the attribute value for Observacion, using the alias name Observacion
     */
    public String getObservacion() {
        return (String)getAttributeInternal(OBSERVACION);
    }

    /**Sets <code>value</code> as the attribute value for Observacion
     */
    public void setObservacion(String value) {
        setAttributeInternal(OBSERVACION, value);
    }

    /**Gets the attribute value for CreadoPor, using the alias name CreadoPor
     */
    public String getCreadoPor() {
        return (String)getAttributeInternal(CREADOPOR);
    }

    /**Sets <code>value</code> as the attribute value for CreadoPor
     */
    public void setCreadoPor(String value) {
        setAttributeInternal(CREADOPOR, value);
    }

    /**Gets the attribute value for FechaCreacion, using the alias name FechaCreacion
     */
    public Date getFechaCreacion() {
        return (Date)getAttributeInternal(FECHACREACION);
    }

    /**Sets <code>value</code> as the attribute value for FechaCreacion
     */
    public void setFechaCreacion(Date value) {
        setAttributeInternal(FECHACREACION, value);
    }

    /**Gets the attribute value for ModPor, using the alias name ModPor
     */
    public String getModPor() {
        return (String)getAttributeInternal(MODPOR);
    }

    /**Sets <code>value</code> as the attribute value for ModPor
     */
    public void setModPor(String value) {
        setAttributeInternal(MODPOR, value);
    }

    /**Gets the attribute value for FechaMod, using the alias name FechaMod
     */
    public Date getFechaMod() {
        return (Date)getAttributeInternal(FECHAMOD);
    }

    /**Sets <code>value</code> as the attribute value for FechaMod
     */
    public void setFechaMod(Date value) {
        setAttributeInternal(FECHAMOD, value);
    }

    /**getAttrInvokeAccessor: generated method. Do not modify.
     */
    protected Object getAttrInvokeAccessor(int index, 
                                           AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDPROCESOCONCILIACION:
            return getIdProcesoConciliacion();
        case MES:
            return getMes();
        case ANIO:
            return getAnio();
        case FECHAEMISIONI:
            return getFechaEmisionI();
        case FECHAEMISIONF:
            return getFechaEmisionF();
        case FECHAANULACIONI:
            return getFechaAnulacionI();
        case FECHAANULACIONF:
            return getFechaAnulacionF();
        case OBSERVACION:
            return getObservacion();
        case CREADOPOR:
            return getCreadoPor();
        case FECHACREACION:
            return getFechaCreacion();
        case MODPOR:
            return getModPor();
        case FECHAMOD:
            return getFechaMod();
        case FECHAPROCESO:
            return getFechaProceso();
        case USUARIOOK:
            return getUsuarioOk();
        case FECHAOK:
            return getFechaOk();
        default:
            return super.getAttrInvokeAccessor(index, attrDef);
        }
    }

    /**setAttrInvokeAccessor: generated method. Do not modify.
     */
    protected void setAttrInvokeAccessor(int index, Object value, 
                                         AttributeDefImpl attrDef) throws Exception {
        switch (index) {
        case IDPROCESOCONCILIACION:
            setIdProcesoConciliacion((Number)value);
            return;
        case MES:
            setMes((Number)value);
            return;
        case ANIO:
            setAnio((Number)value);
            return;
        case FECHAEMISIONI:
            setFechaEmisionI((Date)value);
            return;
        case FECHAEMISIONF:
            setFechaEmisionF((Date)value);
            return;
        case FECHAANULACIONI:
            setFechaAnulacionI((Date)value);
            return;
        case FECHAANULACIONF:
            setFechaAnulacionF((Date)value);
            return;
        case OBSERVACION:
            setObservacion((String)value);
            return;
        case CREADOPOR:
            setCreadoPor((String)value);
            return;
        case FECHACREACION:
            setFechaCreacion((Date)value);
            return;
        case MODPOR:
            setModPor((String)value);
            return;
        case FECHAMOD:
            setFechaMod((Date)value);
            return;
        case FECHAPROCESO:
            setFechaProceso((Date)value);
            return;
        case USUARIOOK:
            setUsuarioOk((String)value);
            return;
        case FECHAOK:
            setFechaOk((Date)value);
            return;
        default:
            super.setAttrInvokeAccessor(index, value, attrDef);
            return;
        }
    }

    /**Add locking logic here.
     */
    public void lock() {
        super.lock();
    }


   private void validar_entidad(){
      Object vResultado;
   
       
       if (this.getFechaEmisionI()==null){
           
           throw new JboException(" Por favor ingrese la fecha inicio emisión");
       }
       
       
       if (this.getFechaEmisionF()==null){
           throw new JboException(" Por favor ingrese la fecha fin emisión");
           
       }
       
       if ( this.getFechaAnulacionI() ==null &&  this.getFechaAnulacionF()!=null){
           throw new JboException(" Por favor ingrese la fecha inicio anulación");  
            
       }
       
       if ( this.getFechaAnulacionF() ==null && this.getFechaAnulacionI()!=null){
           throw new JboException(" Por favor ingrese la fecha fin anulación");  
           
       }
       
       vResultado = utils_DB.getEjecutarQuerry(this.getDBTransaction(),"select count(0) \n" + 
       "from sis_proceso_conciliacion\n" + 
       " where anio= " + this.getAnio() +" and mes=" + this.getMes() +" \n" + 
       " and id_proceso_conciliacion<>"+ (this.getIdProcesoConciliacion()==null? utils.getNumberOracle(-1):this.getIdProcesoConciliacion()) + "\n");
       
       
       if (vResultado != null && !vResultado.toString().equals("0")){
           
           throw new JboException(" Ya existe una conciliación con el mes y año ingresados");  
       }
       
       
       
   }


    /**Custom DML update/insert/delete logic here.
     */
    protected void doDML(int operation, TransactionEvent e) {
    
        validar_entidad();
        
        if (operation ==DML_INSERT){
            
            SequenceImpl sequence = new SequenceImpl("sis_proceso_conciliacion_sq",this.getDBTransaction());
            this.setIdProcesoConciliacion(sequence.getSequenceNumber());
            
        }else if (operation ==DML_UPDATE){
            
            this.setModPor(utils.getAuthUser(this.getDBTransaction()));
            this.setFechaMod(utils.getFechaActual());
        }
    
        registrarLogOperaciones(operation, e); 
        super.doDML(operation, e);
    }

    /**Gets the attribute value for FechaProceso, using the alias name FechaProceso
     */
    public Date getFechaProceso() {
        return (Date)getAttributeInternal(FECHAPROCESO);
    }

    /**Sets <code>value</code> as the attribute value for FechaProceso
     */
    public void setFechaProceso(Date value) {
        setAttributeInternal(FECHAPROCESO, value);
    }

    /**Gets the attribute value for UsuarioOk, using the alias name UsuarioOk
     */
    public String getUsuarioOk() {
        return (String)getAttributeInternal(USUARIOOK);
    }

    /**Sets <code>value</code> as the attribute value for UsuarioOk
     */
    public void setUsuarioOk(String value) {
        setAttributeInternal(USUARIOOK, value);
    }

    /**Gets the attribute value for FechaOk, using the alias name FechaOk
     */
    public Date getFechaOk() {
        return (Date)getAttributeInternal(FECHAOK);
    }

    /**Sets <code>value</code> as the attribute value for FechaOk
     */
    public void setFechaOk(Date value) {
        setAttributeInternal(FECHAOK, value);
    }

    /**Creates a Key object based on given key constituents
     */
    public static Key createPrimaryKey(Number idProcesoConciliacion) {
        return new Key(new Object[]{idProcesoConciliacion});
    }
}
