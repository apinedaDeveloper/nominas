package enlace_datos.consultas.nomina;


import enlace_datos.consultas.nomina.common.SisConsultaChequeConciaVW;

import enlace_datos.util.utils_DB;

import oracle.jbo.JboException;
import oracle.jbo.NameValuePairs;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.domain.Number;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisConsultaChequeConciaVWImpl extends ViewObjectImpl implements SisConsultaChequeConciaVW {
    /**This is the default constructor (do not remove)
     */
    public SisConsultaChequeConciaVWImpl() {
    }

    /**Gets the bind variable value for pIdBanco
     */
    public String getpIdBanco() {
        return (String)getNamedWhereClauseParam("pIdBanco");
    }

    /**Sets <code>value</code> for bind variable pIdBanco
     */
    public void setpIdBanco(String value) {
        setNamedWhereClauseParam("pIdBanco", value);
    }

    /**Gets the bind variable value for pNumCheque
     */
    public String getpNumCheque() {
        return (String)getNamedWhereClauseParam("pNumCheque");
    }

    /**Sets <code>value</code> for bind variable pNumCheque
     */
    public void setpNumCheque(String value) {
        setNamedWhereClauseParam("pNumCheque", value);
    }
    
    
    public void cambiarEstadoCheque(Number pIdDocumentoBanco, Number pIdEstado, String pObservaciones,String pUsuario, String pFechaDMG){
        
        NameValuePairs vParametros;
        vParametros = new NameValuePairs();
        
        if(pFechaDMG==null){
            pFechaDMG="";
        }
        
        if ( pIdDocumentoBanco != null)
        {
            if(pObservaciones!=null && pObservaciones.length()>5){
                vParametros.setAttribute("1",pIdDocumentoBanco); 
                vParametros.setAttribute("2",pIdEstado);
                vParametros.setAttribute("3",pObservaciones);
                vParametros.setAttribute("4",pUsuario);                
                vParametros.setAttribute("5",pFechaDMG);                       
                System.out.println(pIdDocumentoBanco+" "+pIdEstado+" "+pObservaciones+" "+pUsuario+" "+pFechaDMG);              
                 if (utils_DB.ejecutarProcedimiento(this.getDBTransaction(),"sis_pkg_procs.CAMBIAR_ESTADO_CHEQUE(?,?,?,?,?)",vParametros)){
                     
                     this.getDBTransaction().commit();     
                 }else{
        
                    this.getDBTransaction().rollback();
                    throw new JboException("Ha ocurrido un error");
                 }
                 
            }else{
                throw new JboException("Debe ingresar una observacion"); 
            }
        }else {
            
            throw new JboException("No ha seleccionado el pago"); 
        }
        
        //sis_pkg_procs.CAMBIAR_ESTADO_CHEQUE(?,?,?,?);
        
    }
    
}
