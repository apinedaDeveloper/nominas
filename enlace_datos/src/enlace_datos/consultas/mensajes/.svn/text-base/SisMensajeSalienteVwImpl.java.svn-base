package enlace_datos.consultas.mensajes;


import enlace_datos.consultas.mensajes.common.SisMensajeSalienteVw;

import enlace_datos.entidades.mensajes.SisMensajeSalienteImpl;

import oracle.jbo.JboException;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisMensajeSalienteVwImpl extends ViewObjectImpl implements SisMensajeSalienteVw {
    /**This is the default constructor (do not remove)
     */
    public SisMensajeSalienteVwImpl() {
    }
    
    public String crear_mensaje(String pDestinatarios,String pAsunto,String pMensaje,String  pUsuarioEnvio,Number pIdReply){
       SisMensajeSalienteVwRowImpl vNuevaFila;
       SisMensajeSalienteImpl vEntidad;
      
        
       try{
       vNuevaFila=(SisMensajeSalienteVwRowImpl)this.createRow();
       vNuevaFila.setAsunto(pAsunto);
       vNuevaFila.setMensaje(pMensaje);
       vNuevaFila.setUsuarioEnvio(pUsuarioEnvio);
       vNuevaFila.setDestinatarios(pDestinatarios);
       if (pIdReply!=null &&pIdReply.compareTo(0)>0 )  vNuevaFila.setIdReply(pIdReply);
        else
       vNuevaFila.setIdReply(null); 
       
       this.getDBTransaction().commit();
       
       vEntidad=(SisMensajeSalienteImpl)vNuevaFila.getEntity(0);
       vEntidad.actualizaEstado("1");
       this.getDBTransaction().commit();
       
        
       }catch(Exception exep){
         exep.printStackTrace();
         throw new JboException("No se ha podido enviar en mensaje!!");  
           
       }
     return vNuevaFila.getNoEnviados();   
    }

    /**Gets the bind variable value for pUsuario
     */
    public String getpUsuario() {
        return (String)getNamedWhereClauseParam("pUsuario");
    }

    /**Sets <code>value</code> for bind variable pUsuario
     */
    public void setpUsuario(String value) {
        setNamedWhereClauseParam("pUsuario", value);
    }
}
