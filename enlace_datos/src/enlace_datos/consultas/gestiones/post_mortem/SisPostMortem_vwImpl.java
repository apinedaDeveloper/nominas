package enlace_datos.consultas.gestiones.post_mortem;


import enlace_datos.consultas.gestiones.post_mortem.common.SisPostMortem_vw;

import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisPostMortem_vwImpl extends ViewObjectImpl implements SisPostMortem_vw {
    /**This is the default constructor (do not remove)
     */
    public SisPostMortem_vwImpl() {
    }

    //Recupera las solicitudes de prestaciones post mortem de los últimos 30 dias

    public void RecuperarSolicitudes() {
        this.setWhereClause("( TO_DATE(SYSDATE, 'dd/mm/yyyy' ) - TO_DATE(FECHA_CREACION, 'dd/mm/yyyy')) <= 30 AND ID_TIPO_PRESTACION=2");
        this.executeQuery();
    }
    
    //Recupera las solicitudes de prestaciones post mortem para el rol de Profesional de Caja
    
    public void RecuperarSolicitudesProfesionalCaja() {
        this.setWhereClause("NOMBRE_ESTADO_INDEMNIZACION IN ('TRASLADADO A CAJA','LIQUIDADO')  AND ID_TIPO_PRESTACION=2");
        this.executeQuery();
    }

    //Recupera una solicitud por su llave primaria

    public void RecuperarSolicitud(Number pIdTipoPrestacion, Number pAnio, 
                                   Number pCorrelativoAnio) {
        String str_querry = "";
        if (pIdTipoPrestacion != null && pIdTipoPrestacion.intValue() > 0 && 
            pAnio != null && pAnio.intValue() > 0 && 
            pCorrelativoAnio != null && pCorrelativoAnio.intValue() > 0) {
            str_querry = 
                    " ID_TIPO_PRESTACION = " + pIdTipoPrestacion + " AND ANIO = " + 
                    pAnio + " AND CORRELATIVO_ANIO = " + pCorrelativoAnio;
            this.setWhereClause(str_querry);
        }
        this.executeQuery();
    }
}
