package enlace_datos.consultas.gestiones.contrato;

import enlace_datos.consultas.gestiones.contrato.common.SisUnidadesEjecutoras_Id_vw;

import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisUnidadesEjecutoras_Id_vwImpl extends ViewObjectImpl implements SisUnidadesEjecutoras_Id_vw {
    /**This is the default constructor (do not remove)
     */
    public SisUnidadesEjecutoras_Id_vwImpl() {
    }
    
    public void filtrar_x_acceso(String pUsuario){
        String vFiltro;
        vFiltro="exists(\n" + 
        "           select 1 from usuario_unidad b, partida c\n" + 
        "                where b.id_partida=c.id_partida\n" + 
        "           and usuario='" +pUsuario + "' \n" + 
        "           and b.tipo_usuario='TRABAJADOR'\n" + 
        "           and sysdate between b.vigencia_de and nvl(b.vigencia_a,sysdate)\n" + 
        "           and QRSLT.d1=c.d1\n" + 
        "           and QRSLT.d2=c.d2\n" + 
        "           and QRSLT.d3d4=c.d3d4\n" + 
        "           and \n" + 
        "           (\n" + 
        "            (QRSLT.d7=c.d7\n" + 
        "             and QRSLT.d6=c.d6\n" + 
        "             and QRSLT.d5=c.d5\n" + 
        "            )\n" + 
        "            or\n" + 
        "          (\n" + 
        "           c.d5 is null\n" + 
        "           and c.d6 is null\n" + 
        "           and c.d7 is null \n" + 
        "          )\n" + 
        "           )\n" + 
        "           and QRSLT.aniomanual=c.aniomanual\n" + 
        "          )\n";
        
        this.setWhereClause(vFiltro);        
        this.executeQuery();
    }
   

    public void filtrar_x_acceso_dep45(oracle.jbo.domain.Number pDependencia, String pUsuario){
        String vFiltro;
        vFiltro="exists(\n" + 
        "           select 1 from usuario_unidad b, partida c\n" + 
        "                where b.id_partida=c.id_partida\n" + 
        "           and usuario='" +pUsuario + "' \n" + 
        "           and b.tipo_usuario='TRABAJADOR'\n" + 
        "           and sysdate between b.vigencia_de and nvl(b.vigencia_a,sysdate)\n" + 
        "           and QRSLT.d1=c.d1\n" + 
        "           and QRSLT.d2=c.d2\n" + 
        "           and QRSLT.d3d4=c.d3d4\n" +
        "           and QRSLT.d3d4=" + pDependencia +
        "           and (QRSLT.d2=5 or QRSLT.d2=6)" +
        "           and \n" + 
        "           (\n" + 
        "            (QRSLT.d7=c.d7\n" + 
        "             and QRSLT.d6=c.d6\n" + 
        "             and QRSLT.d5=c.d5\n" + 
        "            )\n" + 
        "            or\n" + 
        "          (\n" + 
        "           c.d5 is null\n" + 
        "           and c.d6 is null\n" + 
        "           and c.d7 is null \n" + 
        "          )\n" + 
        "           )\n" + 
        "           and QRSLT.aniomanual=c.aniomanual\n" + 
        "          )\n";
        
        this.setWhereClause(vFiltro);        
        this.executeQuery();
    }

   
   public void QuitarFiltro(){
       this.setWhereClause("");    
       this.executeQuery();
   }
    
    
}
