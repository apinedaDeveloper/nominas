package enlace_datos.consultas.gestiones.revision;

import enlace_datos.ViewConsultaImpl;


import enlace_datos.consultas.gestiones.revision.common.SisContratosRevisados;

import enlace_datos.util.utils_DB;

import oracle.jbo.JboException;
import oracle.jbo.NameValuePairs;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisContratosRevisadosImpl extends ViewConsultaImpl implements SisContratosRevisados {
    /**This is the default constructor (do not remove)
     */
    public SisContratosRevisadosImpl() {
        super.setVerificarParam(true);
    }

    /**Gets the bind variable value for pUsuario
     */
    public String getpUsuario() {
        return (String)getNamedWhereClauseParam("pUsuario");
    }

    /**Sets <code>value</code> for bind variable pUsuario
     */
    public void setpUsuario(String value) {
        setNamedWhereClauseParam("pUsuario", value);
    }

    /**Gets the bind variable value for pAnio
     */
    public Number getpAnio() {
        return (Number)getNamedWhereClauseParam("pAnio");
    }

    /**Sets <code>value</code> for bind variable pAnio
     */
    public void setpAnio(Number value) {
        setNamedWhereClauseParam("pAnio", value);
    }
    
    public void filtrarIdcontrato(Number pIdContrato,Number pRegistroEmpleado){

     if (pIdContrato!=null)
      this.setWhereClause("id_contrato="+pIdContrato);  
     else if (pRegistroEmpleado!=null)
      this.setWhereClause("registro_empleado="+pRegistroEmpleado);  
     else
      this.setWhereClause("");  
        
     this.executeQuery();
     
    }

    public void quitarFiltros(){
        
        this.setWhereClause("");
        this.executeQuery();   
    }

    public void consultraSinFiltros(String pUsuario){
        this.setpUsuario(pUsuario);
        this.setWhereClause("");
        this.executeQuery();
    }
    
 public void reversar_contrato(Number pIdGestion,String pObserv,String pUsuario){
        String vResultado;
        NameValuePairs vListado;        
        vListado= new NameValuePairs();
        
        vListado.setAttribute("01",pIdGestion);
        vListado.setAttribute("02",pObserv);
        vListado.setAttribute("03",pUsuario);
        
        vResultado=utils_DB.ejecutarProcedimiento3(this.getDBTransaction(),"sis_pkg_procs.REVERTIR_GESTIONES(?,?,?,'CONTRATO')",vListado);
        
         if (vResultado.toString().equals("OK")){
             
             this.getDBTransaction().commit();
         }else{
             
            throw new JboException(vResultado); 
         }
        
}

    public void filtrar_ContReg(Number pIdContrato, Number pRegistroEmpleado, 
                                Number pCui, String pUsuario, Number pAnio) {

        if (pIdContrato != null) {
            this.setWhereClause("id_contrato=" + pIdContrato);
            this.setpUsuario(pUsuario);
            this.setpAnio(pAnio);
        } else if (pRegistroEmpleado != null) {
            this.setWhereClause("registro_empleado=" + pRegistroEmpleado);
            this.setpUsuario(pUsuario);
            this.setpAnio(pAnio);
        } else if (pCui != null) {
            this.setWhereClause("cui=" + pCui);
            this.setpUsuario(pUsuario);
            this.setpAnio(pAnio);
        } else
            this.setWhereClause("");

        this.executeQuery();

    }
    
}
