package enlace_datos.consultas.gestiones.plazas021;

import enlace_datos.consultas.gestiones.plazas021.common.sis_plaza;

import enlace_datos.util.utils_DB;

import java.sql.ResultSet;

import oracle.jbo.JboException;
import oracle.jbo.NameValuePairs;
import oracle.jbo.domain.Number;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.server.ViewRowImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class sis_plazaImpl extends ViewObjectImpl implements sis_plaza {
    /**This is the default constructor (do not remove)
     */
    public sis_plazaImpl() {
    }

    /**Gets the bind variable value for pUsuario
     */
    public String getpUsuario() {
        return (String)getNamedWhereClauseParam("pUsuario");
    }

    /**Sets <code>value</code> for bind variable pUsuario
     */
    public void setpUsuario(String value) {
        setNamedWhereClauseParam("pUsuario", value);
    }

    /**Gets the bind variable value for varPartida
     */
    public Number getvarPartida() {
        return (Number)getNamedWhereClauseParam("varPartida");
    }

    /**Sets <code>value</code> for bind variable varPartida
     */
    public void setvarPartida(Number value) {
        setNamedWhereClauseParam("varPartida", value);
    }
    
    public void reset(){
        this.setWhereClause("id_partida <0");
        this.executeQuery();
        
    }
    
    public void Quitareset(){
        this.setWhereClause("");
        
        
    }

    /**executeQueryForCollection - overridden for custom java data source support.
     */
    protected void executeQueryForCollection(Object qc, Object params[], int noUserParams) {super.executeQueryForCollection(qc, params, noUserParams);
    }

    /**hasNextForCollection - overridden for custom java data source support.
     */
    protected boolean hasNextForCollection(Object qc) {
        boolean bRet = super.hasNextForCollection(qc);
        return bRet;
    }

    /**createRowFromResultSet - overridden for custom java data source support.
     */
    protected ViewRowImpl createRowFromResultSet(Object qc, 
                                                 ResultSet resultSet) {
        ViewRowImpl value = super.createRowFromResultSet(qc, resultSet);
        return value;
    }

    /**getEstimatedRowCount - overridden for custom java data source support.
     */
    public long getEstimatedRowCount() {
        long value = super.getEstimatedRowCount();
        return value;
    }

    /**Gets the bind variable value for pAnio
     */
    public Number getpAnio() {
        return (Number)getNamedWhereClauseParam("pAnio");
    }

    /**Sets <code>value</code> for bind variable pAnio
     */
    public void setpAnio(Number value) {
        setNamedWhereClauseParam("pAnio", value);
    }
    
    public void ObtenerPlazaSicoin(Number pIdDep, Number pAnio){
        Object resultado = "0";
        NameValuePairs vParametros;
        vParametros = new NameValuePairs();
        
        vParametros.setAttribute("1",pIdDep);
        vParametros.setAttribute("2",pAnio);
        //System.out.println("");
        resultado=utils_DB.getValorFuncion(this.getDBTransaction(),"Sis_Pkg_Util.ObtenerPlazaSicoin(?,?)",vParametros);
        if(resultado.equals("-1")){ //Error a la momento de actualizacion
            throw new JboException("No se ha encontrado informacion sobre plaza seleccionada","01",null);
        }
        
    }
    
    public void ActualizarPlazaSicoin(Number pIdPartida, Number pIdPuesto, Number pNumeroPlaza, Number pCorrelativo, Number pPlazaSicoin, Number pIdPartidaSicoin){
        boolean vResultado; 
        NameValuePairs vParametros= new NameValuePairs();
        
         vParametros.setAttribute("1",pIdPartida);
         vParametros.setAttribute("2",pIdPuesto);
         vParametros.setAttribute("3",pNumeroPlaza);
         vParametros.setAttribute("4",pCorrelativo);
         vParametros.setAttribute("5",pPlazaSicoin);
         vParametros.setAttribute("6",pIdPartidaSicoin);
         //System.out.println("id_partida="+pIdPartida+",Id_ puesto="+pIdPuesto+", numero_plaza="+pNumeroPlaza+", correlativo="+pCorrelativo
         //+", plaza sicoin="+pPlazaSicoin+", Id partida sicoin="+pIdPartidaSicoin);
         vResultado=utils_DB.ejecutarProcedimiento(this.getDBTransaction()," Sis_Pkg_Util.ActualizarPlazaSicoin(?,?,?,?,?,?)",vParametros); 
                
         if (vResultado==false){
           this.getDBTransaction().rollback();
           throw new JboException("Ha ocurrido un error, por favor revisar");
         }else{
           this.getDBTransaction().commit();
         }



    }
}
