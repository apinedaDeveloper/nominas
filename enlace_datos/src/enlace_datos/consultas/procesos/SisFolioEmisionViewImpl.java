package enlace_datos.consultas.procesos;

import enlace_datos.consultas.procesos.common.SisFolioEmisionView;

import java.util.Calendar;

import oracle.jbo.Row;
import oracle.jbo.ViewObject;
import oracle.jbo.server.SessionImpl;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class SisFolioEmisionViewImpl extends ViewObjectImpl implements SisFolioEmisionView {
    /**This is the default constructor (do not remove)
     */
    public SisFolioEmisionViewImpl() {
    }
    
    public void cambiarEstadoActual(Boolean pValor){
        
        
       Row pFila;
       pFila=this.getCurrentRow();
       pFila.setAttribute("isSel",pValor);  
       
                
    }


    public void cambiarEstadoTodos(Boolean pValor){
        
       Row []pFilas;
       int vTam; 
       pFilas=this.getAllRowsInRange();
        
       vTam=pFilas.length;
       
       for (int i=0;i<vTam;i++){
         
         pFilas[i].setAttribute("isSel",pValor);  
           
       }
                
    }

     
    /**
     * Posiciona en el row seleccionado isSel = true
     */
    public void posicionaSeleccionado(){
        Row []pFilas;
        int vTam; 
        pFilas=this.getAllRowsInRange();
         
        vTam=pFilas.length;
        
        for (int i=0;i<vTam;i++){
          
          if ((Boolean)pFilas[i].getAttribute("isSel")==true){
              this.setCurrentRow(pFilas[i]);
              break;
          }
            
        }     
            
    }
    
    /**
     * Metodo para registrar cambios en los detalles
     */
    public void registraModificacionEnDetalle(){
        Row pFila;
        pFila=this.getCurrentRow();
        
        Object fecha = new oracle.jbo.domain.Date().getCurrentDate();
        Calendar calendario = Calendar.getInstance();
        int hora = calendario.get(Calendar.HOUR_OF_DAY);
        int minutos = calendario.get(Calendar.MINUTE);
        int segundos = calendario.get(Calendar.SECOND);
        oracle.jbo.domain.Date fechaHora = new oracle.jbo.domain.Date(fecha.toString()+" "+String.valueOf(hora)+":"+String.valueOf(minutos)+":"+String.valueOf(segundos));
        
        SessionImpl session = (SessionImpl)this.getDBTransaction().getRootApplicationModule().getSession();
        String usuario = session.getUserPrincipalName();
        
        pFila.setAttribute("ModPor",usuario);
        pFila.setAttribute("FechaMod",fechaHora);

    }    
}
