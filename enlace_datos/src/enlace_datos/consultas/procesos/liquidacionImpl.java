package enlace_datos.consultas.procesos;


import enlace_datos.consultas.procesos.common.liquidacion;

import enlace_datos.util.utils_DB;

import oracle.jbo.JboException;
import oracle.jbo.NameValuePairs;
import oracle.jbo.Row;
import oracle.jbo.RowIterator;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.domain.Number;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class liquidacionImpl extends ViewObjectImpl implements liquidacion {
    /**This is the default constructor (do not remove)
     */
    public liquidacionImpl() {
    
    }
    
    
    public void liquidar_nomina(Number pIdProceso, Number pIDLiquidacion ){
    
        NameValuePairs valores1=new NameValuePairs();
        String vResultado;
    
        valores1.setAttribute("1",pIdProceso);
        valores1.setAttribute("2",pIDLiquidacion);
        vResultado=null;
          vResultado=utils_DB.ejecutarProcedimiento3(this.getDBTransaction(),"sis_pkg_procs.LiquidarDocumentoV2(?,?)",valores1);
         
         if (vResultado!=null && !vResultado.toString().equals("OK")){
           //  e.getDBTransaction().cancelDMLOperations();
            throw new JboException(vResultado); 
         }
         
        
        
    }
    
    
    public void setIdProdeso( Number proceso ){
        liquidacionRowImpl fila;
        fila= (liquidacionRowImpl)this.getCurrentRow();
        if (fila!=null){
            fila.setIdProceso(proceso);
        }
        
    }
    
  
  public void crearLiquidacion(String pUsuario){
      
      Row vFila;
      Row vFolio;
      NameValuePairs vAtributos = new NameValuePairs();
      
      liquidacionRowImpl vLiq;    
      vAtributos.setAttribute("CreadoPor",pUsuario);      
      vFila=this.createAndInitRow(vAtributos);
      this.insertRow(vFila);
      this.setCurrentRow(vFila);
   /*   
      vLiq=(liquidacionRowImpl)this.getCurrentRow();      
      
      vAtributos=new NameValuePairs();
      vAtributos.setAttribute("CreadoPor",pUsuario);
      
      vFolio=vLiq.getSisFolioLiquidacionVw().createAndInitRow(vAtributos);      
      
      vLiq.getSisFolioLiquidacionVw().insertRow(vFolio);
      
     
*/
      
      
  }
    
    
  public void agregarFolios(){
    liquidacionRowImpl vFila;    
    RowIterator vFol;
    Row vfolio;
    vFila=(liquidacionRowImpl)this.getCurrentRow();
    
    vFol=vFila.getSisFolioLiquidacionVw();
    
    vfolio=vFol.createRow();
    vfolio.setAttribute("CreadoPor","2009023");
    vFol.insertRow(vfolio);
      
  }

    /**Gets the bind variable value for pIdLiquidacion
     */
    public Number getpIdLiquidacion() {
        return (Number)getNamedWhereClauseParam("pIdLiquidacion");
    }

    /**Sets <code>value</code> for bind variable pIdLiquidacion
     */
    public void setpIdLiquidacion(Number value) {
        setNamedWhereClauseParam("pIdLiquidacion", value);
    }
}
