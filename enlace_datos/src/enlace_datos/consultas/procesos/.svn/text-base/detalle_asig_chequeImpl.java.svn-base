package enlace_datos.consultas.procesos;

import enlace_datos.consultas.procesos.common.detalle_asig_cheque;

import enlace_datos.util.utils_DB;

import oracle.jbo.Row;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jbo.domain.Number;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class detalle_asig_chequeImpl extends ViewObjectImpl implements detalle_asig_cheque {
    /**This is the default constructor (do not remove)
     */
    public detalle_asig_chequeImpl() {
    }
    
public void inicializaCheque(Number pIdBanco)
{
    
  String vConsulta;
  String vVal[];
  Object vResultado;
  Row vFila;
  vConsulta="select to_char(max(num_doc_fisico)+1)||'|'||to_char(max(nvl(num_inventario,0))+1)\n" + 
  " from\n" + 
  " sis_documento_banco\n" + 
  " where id_banco=" +pIdBanco+
  " and id_tipo_documento=1\n";
  
  
  vResultado=utils_DB.getEjecutarQuerry(this.getDBTransaction(),vConsulta);
  
 try
 {
     
      if (vResultado!=null)
      {
          vFila=this.getCurrentRow();
          vVal=vResultado.toString().split("\\|"); 
          vFila.setAttribute("NumChequeInicial",vVal[0]);
          vFila.setAttribute("NumInventario",vVal[1]);
          
      }

 }catch(Exception exep){
     
 }
 
}
 
 
public String getNumBoleta(){
    
    Object vResultado;
    
    vResultado=utils_DB.getEjecutarQuerry(this.getDBTransaction(),"select valor_numerico from sis_parametros_aplicacion\n" + 
    "where nom_parametro='ACREDIT_NUM_DOC'");
    
    return (vResultado!=null?vResultado.toString():"");    
}
 
 public String getNumPoliza(){
        
  Object vResultado;
        
  vResultado=utils_DB.getEjecutarQuerry(this.getDBTransaction(),"select valor_numerico from sis_parametros_aplicacion\n" + 
  "where nom_parametro='NUM_POLIZA'");
        
  return (vResultado!=null?vResultado.toString():"");    
}
    
    
}
